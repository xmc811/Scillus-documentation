---
lastmod: "2019-12-23T12:49:01Z"
publishdate: "2019-12-21"
draft: no
title: Initial Setup
weight: 20
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>


<style>
caption {
      font-weight: bold;
      font-size: 1.0em;
}
</style>
<div id="sample-data" class="section level2">
<h2>Sample Data</h2>
<p>The sample dataset used in the vignettes is from publication by <a href="https://www.ncbi.nlm.nih.gov/pubmed/31010835">Gaydosik AM <em>et al</em></a>. It can be downloaded from <a href="https://github.com/xmc811/Scillus/blob/development/test/GSE128531.tar.gz">here</a>. Once downloaded, the file can be unzipped by <code>tar xvzf GSE128531.tar.gz</code>. There is no need to further unzip the individual <code>.csv.gz</code> files. To reduce computation time, the dataset only includes 6 samples and 300 cells for each sample. The complete raw data are available at <a href="https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=GSE128531">GEO</a>.</p>
<p>The sample data are in <code>.csv.gz</code> format, but Scillus also works for 10x Genomics cellranger output format like below:</p>
<pre class="console"><code>$ tree filtered_feature_bc_matrix
filtered_feature_bc_matrix
├── barcodes.tsv.gz
├── features.tsv.gz
└── matrix.mtx.gz</code></pre>
</div>
<div id="metadata" class="section level2">
<h2>Metadata</h2>
<p>Given the fact that the sample sizes for each scRNA-seq project are usually more than one, the loading and filtering functions of Scillus will generate and process a list of Seurat objects. A metadata dataframe should be provided to the loading function. The dataframe should have at least two columns: one named <code>sample</code>, and the other named <code>file</code> or <code>folder</code>, depending on the input data format. For the sample data, metadata can be constructed by:</p>
<pre class="r"><code>a &lt;- list.files(&quot;your/path/to/sample/data/GSE128531_RAW&quot;, full.names = TRUE)
m &lt;- tibble::tibble(file = a, 
                    sample = stringr::str_remove(basename(a), &quot;.csv.gz&quot;),
                    group = rep(c(&quot;CTCL&quot;, &quot;Normal&quot;), each = 3))</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-3">Table 1: </span>Metadata of sample data
</caption>
<thead>
<tr>
<th style="text-align:left;">
file
</th>
<th style="text-align:left;">
sample
</th>
<th style="text-align:left;">
group
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/CTCL-5.csv.gz
</td>
<td style="text-align:left;">
CTCL-5
</td>
<td style="text-align:left;">
CTCL
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/CTCL-6.csv.gz
</td>
<td style="text-align:left;">
CTCL-6
</td>
<td style="text-align:left;">
CTCL
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/CTCL-8.csv.gz
</td>
<td style="text-align:left;">
CTCL-8
</td>
<td style="text-align:left;">
CTCL
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/HC-1.csv.gz
</td>
<td style="text-align:left;">
HC-1
</td>
<td style="text-align:left;">
Normal
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/HC-2.csv.gz
</td>
<td style="text-align:left;">
HC-2
</td>
<td style="text-align:left;">
Normal
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/HC-3.csv.gz
</td>
<td style="text-align:left;">
HC-3
</td>
<td style="text-align:left;">
Normal
</td>
</tr>
</tbody>
</table>
<p>Any additional metadata at the sample level (e.g. group, sex, age, treatment) can be appended to the dataframe, and they will be included in the Seurat object during the loading. Here, the <code>group</code> column is added for demonstration purpose.</p>
<p>For 10x Genomics cellranger output, the metadata should have one column named <code>folder</code> instead of <code>file</code> like Table 2, and there should be 3 files in each folder as the tree structure shown above.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-4">Table 2: </span>Metadata for 10x Genomics cellranger output
</caption>
<thead>
<tr>
<th style="text-align:left;">
folder
</th>
<th style="text-align:left;">
sample
</th>
<th style="text-align:left;">
group
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/CTCL-5
</td>
<td style="text-align:left;">
CTCL-5
</td>
<td style="text-align:left;">
CTCL
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/CTCL-6
</td>
<td style="text-align:left;">
CTCL-6
</td>
<td style="text-align:left;">
CTCL
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/CTCL-8
</td>
<td style="text-align:left;">
CTCL-8
</td>
<td style="text-align:left;">
CTCL
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/HC-1
</td>
<td style="text-align:left;">
HC-1
</td>
<td style="text-align:left;">
Normal
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/HC-2
</td>
<td style="text-align:left;">
HC-2
</td>
<td style="text-align:left;">
Normal
</td>
</tr>
<tr>
<td style="text-align:left;">
/Users/mxu3/Documents/projects/Scillus/test/GSE128531_RAW/HC-3
</td>
<td style="text-align:left;">
HC-3
</td>
<td style="text-align:left;">
Normal
</td>
</tr>
</tbody>
</table>
</div>
<div id="palette-setup" class="section level2">
<h2>Palette setup</h2>
<p>The plotting functions of Scillus will incorperate palette setup to ensure consistent coloring schemes for each variable in different types of plots.</p>
<pre class="r"><code>pal &lt;- tibble::tibble(var = c(&quot;sample&quot;, &quot;group&quot;,&quot;seurat_clusters&quot;),
                      pal = c(&quot;Set2&quot;,&quot;Set1&quot;,&quot;Paired&quot;))</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-5">Table 3: </span>Palette setup
</caption>
<thead>
<tr>
<th style="text-align:left;">
var
</th>
<th style="text-align:left;">
pal
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
sample
</td>
<td style="text-align:left;">
Set2
</td>
</tr>
<tr>
<td style="text-align:left;">
group
</td>
<td style="text-align:left;">
Set1
</td>
</tr>
<tr>
<td style="text-align:left;">
seurat_clusters
</td>
<td style="text-align:left;">
Paired
</td>
</tr>
</tbody>
</table>
</div>
